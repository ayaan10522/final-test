<html lang="en"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title id="siteTitle">Crescent School ‚Äî Excellence with Values</title>
  <meta name="description" id="siteDescription" content="A complete K-12 Muslim school with Pre-School, Grades 1-10 (English &amp; Gujarati Medium), 11‚Äì12 Science (English &amp; Gujarati), and a Special Girls‚Äô School, with Morning and Noon shifts.">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&amp;display=swap" rel="stylesheet">
  
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <style>
    /* 1. COLOR & GLASS VARIABLES (MATCHING LOGO) */
    :root{
      /* Logo Colors */
      --primary: #0F6F3A;     /* Deep Forest Green */
      --primary-dark: #074724; /* Darker Green for background/hover */
      --accent: #CAA64A;      /* Rich Gold/Olive */

      /* Glass UI Variables */
      --dark-bg: #0A1D14; /* Original dark for contrast */
      --glass-bg: rgba(255, 255, 255, 0.05); /* Frosted Glass Base */
      --glass-border: rgba(255, 255, 255, 0.15); /* Light border */
      --text: #f0f0f0;      /* Light text for dark/glass background */
      --text-dim: #b0c0b8;   /* Dimmmed light text */
      --white: #ffffff;

      --radius: 20px; /* Slightly larger radius for the glass feel */
      --shadow: 0 8px 32px rgba(0,0,0,.4); /* Stronger shadow for depth */
      --shadow-soft: 0 4px 16px rgba(0,0,0,.2);
      --maxw: 1200px;
    }

    /* GLOBAL STYLES & BACKGROUND */
    *{box-sizing: border-box}
    html,body{
        margin:0;
        padding:0;
        font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
        color:var(--text);
        /* 2. New Background for Glass Effect */
        background: linear-gradient(135deg, var(--primary-dark) 0%, #1a3a2d 100%);
        background-attachment: fixed;
    }
    a{color:var(--accent);text-decoration:none}
    img{max-width:100%;display:block}

    /* Top bar */
    .topbar{background:var(--primary-dark);color:#dfe9e4;font-size:.9rem}
    .wrap{max-width:var(--maxw);margin:auto;padding:0 20px}
    .topbar .wrap{display:flex;align-items:center;justify-content:space-between;padding:10px 20px}
    .topbar a{color:#dfe9e4;margin-left:16px}

    /* Header / nav (Glass UI applied here) */
    header{
        position:sticky;
        top:0;
        z-index:50;
        /* Glass Effect */
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--glass-border);
        box-shadow: var(--shadow-soft);
    }
    nav{display:flex;align-items:center;justify-content:space-between;max-width:var(--maxw);margin:auto;padding:16px 20px;gap:16px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:52px;height:52px;border-radius:12px;object-fit:contain;background:var(--white);border:2px solid var(--accent)}
    .brand .title{font-weight:800;letter-spacing:.5px;color:var(--accent)}
    .brand .subtitle{font-size:.85rem;color:var(--text-dim);margin-top:-4px}

    .menu{display:flex;align-items:center;gap:18px;flex-wrap:wrap}
    .menu a{padding:10px 14px;border-radius:14px;transition:background 0.2s, color 0.2s}
    .menu a:hover{background:rgba(255, 255, 255, 0.1);color:var(--accent)}
    .cta{background:var(--primary);color:#fff;padding:10px 18px;border-radius:14px;box-shadow:var(--shadow-soft);border:1px solid var(--primary-dark)}
    .cta:hover{background:var(--primary-dark)}

    .burger{display:none;background:transparent;border:0;font-size:1.4rem;color:var(--text)}

    /* Hero */
    .hero{max-width:var(--maxw);margin:30px auto;padding:24px 20px}
    .hero-card{
      /* Glass effect applied here */
      background: var(--glass-bg);
      backdrop-filter: blur(8px);
      border:1px solid var(--glass-border);
      border-radius:30px; 
      box-shadow:var(--shadow);
      overflow:hidden;
      display:grid;
      /* Desktop Layout: copy | media (Left | Right) */
      grid-template-columns:1fr 1fr; 
      grid-template-areas: "copy media"; 
      gap:10px;
    }
    .hero-copy{
        padding:36px 32px 36px 36px; 
        grid-area: copy; /* Assign desktop area */
    } 
    .eyebrow{
        display:inline-flex;
        align-items:center;
        gap:8px;
        background:rgba(255, 255, 255, 0.1);
        border:1px solid var(--glass-border);
        color:var(--accent);
        padding:8px 12px;
        border-radius:999px;
        font-weight:600;
        font-size:.9rem;
        margin-bottom:16px
    }
    h1{margin:0 0 12px;font-size:2.4rem;line-height:1.2;color:var(--white)} /* Larger, clearer text */
    .lead{color:var(--text-dim);font-size:1.05rem;margin-bottom:20px}
    .hero-stats{display:flex;gap:16px;flex-wrap:wrap;margin-top:16px}
    .badge{
        background:rgba(255, 255, 255, 0.05); /* Inner Glass effect */
        padding:10px 14px;
        border-radius:14px;
        border:1px solid rgba(255, 255, 255, 0.08);
        font-weight:600;
        color:var(--text-dim);
        font-size:.95rem;
    }
    
    /* === Hero Media / Slideshow Styles === */
    .hero-illustration{
        display:block;
        padding: 0; 
        position: relative; 
        overflow: hidden;
        border-radius: 30px; 
        background: linear-gradient(180deg, rgba(15,111,58,.3), transparent 50%), radial-gradient(70% 70% at 50% 30%, rgba(202,166,74,.3), transparent 60%);
        min-height: 350px; 
        grid-area: media; 
    }

    /* Style for both the video and the images for fitting and rounded edges */
    .hero-media {
        width: 100%;
        height: 100%; 
        max-width: 100%;
        max-height: 100%;
        object-fit: cover; 
        border-radius: 20px; 
        filter: drop-shadow(0 20px 40px rgba(0,0,0,.3));
        position: absolute; 
        top: 0;
        left: 0;
        transition: opacity 1s ease-in-out;
    }

    /* Slideshow Container (starts hidden by opacity) */
    .slideshow-container {
        opacity: 0; 
        z-index: 1; 
    }

    /* Individual slides (stacked) */
    .slideshow-container .slide {
        position: absolute;
        opacity: 0; 
        transition: opacity 1s ease-in-out;
    }

    /* Only the active slide is visible */
    .slideshow-container .slide.active {
        opacity: 1; 
    }

    /* Video element specific (starts visible, higher z-index) */
    #heroVideo {
        opacity: 1; 
        z-index: 2;
    }
    /* === End Hero Media Styles === */


    /* Section helpers */
    section{max-width:var(--maxw);margin:0 auto;padding:30px 20px}
    .section-title{display:flex;align-items:end;justify-content:space-between;margin-bottom:16px}
    .section-title h2{margin:0;font-size:1.8rem;color:var(--accent)}
    .section-sub{color:var(--text-dim);margin:4px 0 0}

    /* Cards grid */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:20px} /* Increased gap for better spacing */
    .col-4{grid-column:span 4}
    .col-6{grid-column:span 6}
    .col-8{grid-column:span 8}
    .col-12{grid-column:span 12}
    
    /* Perfect Sizing: Media query refined for mobile responsiveness */
    @media(max-width:980px){
      /* Ensure all content sections stack correctly */
      .col-4,.col-6,.col-8{grid-column:span 12}
      
      /* FIX 1: Mobile Hero Card Layout - Stack Media on Top */
      .hero-card{
        grid-template-columns:1fr; /* Force stacking on mobile */
        grid-template-areas: "media" "copy"; /* Place media on top of copy */
        border-radius: 0; /* Remove overall card rounding on small screens for full width */
      }

      .hero-copy{
          grid-area: copy;
          padding: 24px 20px; /* Adjust padding for cleaner mobile look */
          border-radius: 0 0 30px 30px; /* Round the bottom edges of the content */
      }
      .hero-illustration{
          grid-area: media;
          display: block; /* FIX 2: Ensure the illustration/slideshow is visible on mobile */
          min-height: 250px; /* Good height for mobile banner */
          border-radius: 30px 30px 0 0; /* Round the top edges of the illustration container */
      }
      .hero-illustration .hero-media {
          /* Ensure media inside matches container's top rounding */
          border-radius: 30px 30px 0 0;
      }
    }

    .card{
        /* Glass effect for content cards */
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: var(--radius);
        box-shadow: var(--shadow-soft);
        padding: 24px; /* Increased padding */
        transition: transform 0.2s, background 0.2s;
    }
    .card:hover {
        transform: translateY(-2px);
        background: rgba(255, 255, 255, 0.05);
    }
    .card h3{margin:0 0 8px; color:var(--accent)}
    .chip{
        display:inline-flex;
        align-items:center;
        gap:8px;
        padding:8px 12px;
        border-radius:999px;
        border:1px solid var(--glass-border);
        background:rgba(255, 255, 255, 0.1);
        font-size:.9rem;
        color:var(--accent);
        font-weight:600
    }

    /* Programs filter (Glass buttons) */
    .filters{display:flex;gap:10px;flex-wrap:wrap}
    .filters button{
        border:1px solid var(--glass-border);
        background:transparent;
        color:var(--text-dim);
        padding:8px 14px;
        border-radius:14px;
        cursor:pointer;
        transition:background 0.2s, color 0.2s;
    }
    .filters button.active{
        background:var(--primary);
        border-color:var(--primary);
        color:var(--white);
        box-shadow: 0 4px 10px rgba(15, 111, 58, 0.4);
    }
    .filters button:hover:not(.active) {
        background: rgba(255, 255, 255, 0.05);
        color: var(--accent);
    }

    /* Notices / events (Glass notice) */
    .notice{
        display:flex;
        gap:16px;
        padding:16px;
        border:1px solid var(--glass-border);
        background:rgba(255, 255, 255, 0.03);
        border-radius:16px;
        margin-bottom:10px; /* Separated notices */
    }
    .pill{
        font-weight:700;
        font-size:.85rem;
        padding:8px 12px;
        border-radius:999px;
        background:var(--accent);
        border:1px solid var(--accent);
        color:var(--primary-dark);
        min-width:100px;
        text-align:center
    }

    /* Tables (Glass table) */
    table{
        width:100%;
        border-collapse:separate;
        border-spacing:0;
        border:1px solid var(--glass-border);
        border-radius:16px;
        overflow:hidden;
        background:rgba(255, 255, 255, 0.03);
    }
    th,td{padding:14px 16px;border-bottom:1px solid rgba(255, 255, 255, 0.05)}
    thead th{background:rgba(255, 255, 255, 0.1);text-align:left;color:var(--accent)}
    tbody tr:last-child td{border-bottom:none}

    /* FAQ (Glass accordion) */
    details{
        border:1px solid var(--glass-border);
        border-radius:16px;
        padding:16px 20px;
        background:rgba(255, 255, 255, 0.03);
    }
    details+details{margin-top:12px}
    summary{cursor:pointer;font-weight:700;color:var(--accent)}
    summary+p{color:var(--text-dim)}

    /* Footer */
    footer{margin-top:40px;background:var(--dark-bg);color:#dfe9e4}
    footer .cols{display:grid;grid-template-columns:repeat(12,1fr);gap:20px;padding:30px 20px;max-width:var(--maxw);margin:auto}
    footer a{color:var(--text-dim)}
    footer a:hover{color:var(--accent)}
    .footbar{border-top:1px solid rgba(255,255,255,.1);padding:14px 20px;text-align:center;font-size:.9rem}

    /* Buttons */
    .btn{
        display:inline-block;
        background:transparent;
        border:1px solid var(--glass-border);
        color:var(--text);
        padding:10px 16px;
        border-radius:14px;
        transition:background 0.2s, color 0.2s;
    }
    .btn:hover{
        background:rgba(255, 255, 255, 0.05);
        border-color:var(--accent);
    }
    .btn.primary{
        background:var(--primary);
        border-color:var(--primary);
        color:var(--white);
        box-shadow: 0 4px 10px rgba(15, 111, 58, 0.4);
    }
    .btn.primary:hover{
        background:var(--primary-dark);
        border-color:var(--primary-dark);
    }

    /* Mobile menu */
    @media(max-width:860px){
      nav{padding:12px 20px}
      .brand img{width:40px;height:40px}
      .menu{display:none;width:100%;padding-top:10px}
      .menu.open{
        display:flex;
        flex-direction:column;
        align-items:flex-start;
        padding-bottom:10px;
        background:rgba(0, 0, 0, 0.1);
      }
      .menu a{width:100%;border-radius:8px}
      .burger{display:inline-flex;align-items:center;gap:8px}

      h1{font-size:2rem} /* Perfect Sizing: Reduce large hero text on mobile */
      .hero-copy{padding:20px}
      
      .topbar{display:none} /* Remove top bar on small mobile for space */
    }

    /* Custom styles for map centering */
    .map-container {
      display: flex;
      justify-content: center;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid var(--glass-border);
      max-width: 100%; 
      margin: 0 auto;
    }
    .map-container iframe {
      width: 100%; 
      height: 320px;
      border: 0;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="wrap">
      <div id="topbarContactInfo">Loading contact info...</div>
      <div>
        <a href="#admissions">Admissions</a>
        <a href="#downloads">Downloads</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
  </div>

  <header>
    <nav>
      <div class="brand">
        <img src="crescent logo.jpg" alt="Crescent School Logo">
        <div>
          <div class="title" id="brandTitle">Crescent School</div>
          <div class="subtitle" id="brandSubtitle">Excellence ‚Ä¢ Character ‚Ä¢ Faith</div>
        </div>
      </div>

      <button class="burger" id="burger">‚ò∞ Menu</button>
      <div class="menu" id="menu">
        <a href="#about">About</a>
        <a href="#programs">Programs</a>
        <a href="#shifts">Shifts</a>
        <a href="#notices">Notices</a>
        <a href="#facilities">Facilities</a>
        <a href="#gallery">Gallery</a>
        <a href="#admissions" class="cta">Apply Now</a>
      </div>
    </nav>
  </header>

  <div class="hero">
    <div class="hero-card">
      <div class="hero-copy">
        <div class="eyebrow" id="heroEyebrow">Loading...</div>
        <h1 id="heroTitle">Loading...</h1>
        <p class="lead" id="heroLead">Loading...</p>
        <div class="hero-stats" id="heroBadgesContainer">
          <div class="badge">Loading Badges...</div>
        </div>
        <p style="margin-top:20px">
          <a class="btn primary" href="#admissions">Start Admission</a>
          <a class="btn" href="#programs" style="margin-left:12px">Explore Programs</a>
        </p>
      </div>
      
      <div class="hero-illustration">
        <video id="heroVideo" class="hero-media" autoplay="" muted="" playsinline="" poster="hero.MP4">
            <source src="hero.MP4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <div id="imageSlideshow" class="slideshow-container hero-media">
            <img class="slide hero-media" alt="School campus illustration 1" src="DSCN6035.JPG">
            <img class="slide hero-media" alt="School campus illustration 2" src="DSCN6042.JPG">
            <img class="slide hero-media" alt="School campus illustration 3" src="DSCN6045.JPG">
            <img class="slide hero-media" alt="School campus illustration 1" src="DJI_20251015180026_0002_D.JPG">
            <img class="slide hero-media" alt="School campus illustration 2" src="DJI_20251015180336_0003_D.JPG">
            <img class="slide hero-media" alt="School campus illustration 3" src="DSCN6015.JPG">
            </div>
      </div>
    </div>

    <div class="wrap" style="margin-top: 20px; color: var(--accent);">
      <b>Update</b>
      <marquee behavior="scroll" direction="left" aria-label="marquee announcements" id="marqueeContent">Loading latest update...</marquee>
    </div>
  </div>

  <section id="about">
    <div class="section-title">
      <div>
        <h2>About Our School</h2>
        <p class="section-sub" id="aboutSubheading">A faith-friendly environment that nurtures intellect, character, and community.</p>
      </div>
      <span class="chip" id="aboutChip">Loading...</span>
    </div>

    <div class="grid">
      <div class="col-8">
        <div class="card">
          <h3 id="missionTitle">Mission</h3>
          <p id="missionBody">Loading mission...</p>
          <h3 style="margin-top:16px" id="visionTitle">Vision</h3>
          <p id="visionBody">Loading vision...</p>
        </div>
      </div>
      <div class="col-4">
        <div class="card">
          <h3>Quick Facts</h3>
          <ul style="color:var(--text-dim); padding-left: 20px;" id="quickFactsList">
            <li>Loading Quick Facts...</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section id="programs">
    <div class="section-title">
      <div>
        <h2>Academic Programs</h2>
        <p class="section-sub" id="programsSubheading">Choose by grade, medium, or section. Use filters to narrow quickly.</p>
      </div>
      <div class="filters">
        <button class="active" data-filter="all">All</button>
        <button data-filter="english">English Medium</button>
        <button data-filter="gujarati">Gujarati Medium</button>
        <button data-filter="preschool">Pre-School</button>
        <button data-filter="girls">Girls‚Äô School</button>
        <button data-filter="science">XI‚ÄìXII Science</button>
        <button data-filter="commerce">XI‚ÄìXII Commerce</button>
        <button data-filter="arts">XI‚ÄìXII Arts</button>
      </div>
    </div>

    <div class="grid" id="programGrid">
      <p style="grid-column: span 12; color: var(--text-dim); text-align: center;">Loading academic programs...</p>
    </div>
  </section>

  <section id="shifts">
    <div class="section-title">
      <div>
        <h2>Morning & Noon Shifts</h2>
        <p class="section-sub" id="shiftsSubheading">Same quality, flexible timing. Friday timings adjusted around Jummah.</p>
      </div>
      <span class="chip" id="shiftsChip">Loading...</span>
    </div>

    <div class="grid" id="shiftsContainer">
      <p style="grid-column: span 12; color: var(--text-dim); text-align: center;">Loading shift timings...</p>
    </div>
  </section>

  <section id="notices">
    <div class="section-title">
      <div>
        <h2>Notices & Events</h2>
        <p class="section-sub" id="noticesSubheading">Latest circulars, exam schedules, and campus events.</p>
      </div>
      <a class="btn" href="#downloads">All Notices</a>
    </div>

    <div id="noticesContainer">
      <p style="color:var(--text-dim); text-align: center;">Loading notices...</p>
    </div>
  </section>

  <section id="facilities">
    <div class="section-title">
      <div>
        <h2>Facilities</h2>
        <p class="section-sub" id="facilitiesSubheading">Everything students need to learn, explore, and grow.</p>
      </div>
    </div>

    <div class="grid" id="facilitiesGrid">
      <p style="grid-column: span 12; color: var(--text-dim); text-align: center;">Loading facilities...</p>
    </div>
  </section>

  <section id="gallery">
    <div class="section-title">
      <div>
        <h2>Campus Gallery</h2>
        <p class="section-sub" id="gallerySubheading">Snapshots from classrooms, labs, and events.</p>
      </div>
    </div>
    <div class="grid">
      <div class="col-4"><div class="card"><img alt="Classroom scene with students" src="DSCN6045.JPG"></div></div>
      <div class="col-4"><div class="card"><img alt="School library with books" src="DJI_20251015180026_0002_D.JPG"></div></div>
      <div class="col-4"><div class="card"><img alt="Science lab experiment" src="DSCN6039.JPG"></div></div>
    </div>
  </section>

  <section id="fees">
    <div class="section-title">
      <div>
        <h2>Fees Structure</h2>
        <p class="section-sub" id="feesSubheading">Transparent fee details for all academic programs.</p>
      </div>
      <a class="btn" href="#contact">Enquire Now</a>
    </div>
    <div class="card">
      <p id="feesBody">Loading fee information...</p>
      <ul style="color:var(--text-dim); padding-left: 20px;" id="feesList">
        <li>Loading fees list...</li>
      </ul>
      <p style="margin-top:16px;color:var(--text-dim)" id="feesNote">Loading fees note...</p>
    </div>
  </section>

  <section id="admissions">
    <div class="section-title">
      <div>
        <h2>Admissions</h2>
        <p class="section-sub" id="admissionsSubheading">Simple 4-step process. Apply online or visit the office.</p>
      </div>
      <a class="btn primary" href="#contact">Talk to Admissions</a>
    </div>

    <div class="grid">
      <div class="col-6">
        <div class="card">
          <h3>Steps</h3>
          <ol style="color:var(--text-dim); padding-left: 20px;" id="admissionStepsList">
            <li>Loading steps...</li>
          </ol>
          <h3 style="margin-top:16px">Documents</h3>
          <ul style="color:var(--text-dim); padding-left: 20px;" id="admissionDocumentsList">
            <li>Loading documents...</li>
          </ul>
        </div>
      </div>
      <div class="col-6">
        <div class="card">
          <h3>Admission Schedule</h3>
          <p id="admissionScheduleBody">Loading schedule...</p>
          <p style="margin-top:16px;color:var(--text-dim)" id="admissionScheduleNote">Loading note...</p>
        </div>
      </div>
    </div>
  </section>
  

  <section id="faq">
    <div class="section-title">
      <div>
        <h2>FAQ & Policies</h2>
        <p class="section-sub" id="faqSubheading">Key information for parents and students.</p>
      </div>
    </div>
    <div id="faqList">
      <p style="color:var(--text-dim); text-align: center;">Loading FAQs...</p>
    </div>
  </section>

  <section id="contact">
    <div class="section-title">
      <div>
        <h2>Contact & Visit</h2>
        <p class="section-sub" id="contactSubheading">We‚Äôre happy to help. Office hours 9:00‚Äì1:00 & 2:00‚Äì5:00.</p>
      </div>
    </div>
    <div class="grid" style="margin-top: 20px;">
      <div class="col-6">
        <div class="card">
          <h3>Address</h3>
          <p id="contactAddress">Loading address...</p>
          <p>Phone: <a id="contactPhoneLink" href="tel:">Loading phone...</a> ‚Ä¢ Email: <a id="contactEmailLink" href="mailto:">Loading email...</a></p>
          <div class="map-container" style="margin-top:16px;">
            <iframe id="mapFrame" src="about:blank" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>
        </div>
      </div>
      <div class="col-6">
        <div class="card" style="min-height: 250px;">
            <h3>Enquiry Form</h3>
            <p style="color:var(--text-dim)">You can integrate your contact form code here to utilize this space. The card styling is ready!</p>
        </div>
      </div>
    </div>
  </section>

  <section id="careers">
    <div class="section-title">
      <div>
        <h2>Careers</h2>
        <p class="section-sub" id="careersSubheading">We welcome passionate educators. Female faculty encouraged for Girls‚Äô Section.</p>
      </div>
      <a class="btn" href="#contact">Apply via Contact Form</a>
    </div>
    <div class="card">
      <p id="careersBody">Loading careers body...</p>
      <ul style="color:var(--text-dim); padding-left: 20px;" id="careersList">
        <li>Loading job openings...</li>
      </ul>
    </div>
  </section>

  <footer>
    <div class="cols">
      <div class="col-4">
        <h3 style="margin-top:0;color:var(--accent)" id="footerTitle">Crescent School</h3>
        <p id="footerMotto">Excellence ‚Ä¢ Character ‚Ä¢ Faith</p>
        <p id="footerAffiliation">Affiliated to GSEB ‚Ä¢ English & Gujarati Medium</p>
      </div>
      <div class="col-4">
        <h4 style="color:var(--accent)">Quick Links</h4>
        <ul style="list-style: none; padding: 0;">
          <li><a href="#programs">Programs</a></li>
          <li><a href="#admissions">Admissions</a></li>
          <li><a href="#fees">Fees</a></li>
          <li><a href="#downloads">Downloads</a></li>
        </ul>
      </div>
      <div class="col-4">
        <h4 style="color:var(--accent)">Contact</h4>
        <p id="footerAddress">Loading address...</p>
        <p id="footerPhone">Loading phone...</p>
        <p id="footerEmail">Loading email...</p>
      </div>
    </div>
    <div class="footbar">¬© 2025 Crescent School. All rights reserved.
      <div class="footbar" style="margin-top: 5px;">Website developed by Ayaan.</div>
    </div>
  </footer>

  <script>
    // === FIREBASE INITIALIZATION & DATA LOADING ===
    const firebaseConfig = {
      apiKey: "AIzaSyBZkf83jEGeffLNF0vFvnv6U8kRkRZXpI8",
      authDomain: "ool-site-updates.firebaseapp.com",
      databaseURL: "https://ool-site-updates-default-rtdb.firebaseio.com",
      projectId: "ool-site-updates",
      storageBucket: "ool-site-updates.firebasestorage.app",
      messagingSenderId: "1045153400854",
      appId: "1:1045153400854:web:4ed7fafe18c9c542fe4d37",
      measurementId: "G-DFP7LC9YMQ"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 1. Load General Site Content (siteInfo)
    function loadSiteInfo() {
        db.ref('siteInfo').on('value', (snapshot) => {
            const data = snapshot.val();
            if (!data) return;

            // --- A. TOPBAR & FOOTER CONTACTS ---
            const { phone, email, address, mapUrl, brandTitle, brandSubtitle } = data.contact || {};
            if (phone && email && address) {
                const topbarText = `üìç ${address} ‚Ä¢ üìû ${phone} ‚Ä¢ ‚úâÔ∏è ${email}`;
                document.getElementById('topbarContactInfo').innerHTML = topbarText;

                document.getElementById('contactAddress').textContent = address;
                document.getElementById('contactPhoneLink').textContent = phone;
                document.getElementById('contactPhoneLink').href = `tel:${phone}`;
                document.getElementById('contactEmailLink').textContent = email;
                document.getElementById('contactEmailLink').href = `mailto:${email}`;

                document.getElementById('footerAddress').textContent = address;
                document.getElementById('footerPhone').textContent = phone;
                document.getElementById('footerEmail').textContent = email;
            }
            if (mapUrl) {
                 document.getElementById('mapFrame').src = mapUrl;
            }
            if (brandTitle) document.getElementById('brandTitle').textContent = brandTitle;
            if (brandSubtitle) document.getElementById('brandSubtitle').textContent = brandSubtitle;


            // --- B. HERO SECTION ---
            const hero = data.hero || {};
            if (hero.eyebrow) document.getElementById('heroEyebrow').textContent = hero.eyebrow;
            if (hero.title) document.getElementById('heroTitle').textContent = hero.title;
            if (hero.lead) document.getElementById('heroLead').textContent = hero.lead;

            const badgesContainer = document.getElementById('heroBadgesContainer');
            badgesContainer.innerHTML = ''; // Clear existing
            if (hero.badges && Array.isArray(hero.badges)) {
                hero.badges.forEach(badgeText => {
                    const badge = document.createElement('div');
                    badge.className = 'badge';
                    badge.textContent = badgeText;
                    badgesContainer.appendChild(badge);
                });
            }


            // --- C. ABOUT SECTION ---
            const about = data.about || {};
            if (about.subheading) document.getElementById('aboutSubheading').textContent = about.subheading;
            if (about.chip) document.getElementById('aboutChip').textContent = about.chip;
            if (about.missionTitle) document.getElementById('missionTitle').textContent = about.missionTitle;
            if (about.missionBody) document.getElementById('missionBody').textContent = about.missionBody;
            if (about.visionTitle) document.getElementById('visionTitle').textContent = about.visionTitle;
            if (about.visionBody) document.getElementById('visionBody').textContent = about.visionBody;

            const quickFactsList = document.getElementById('quickFactsList');
            quickFactsList.innerHTML = ''; // Clear existing
            if (about.quickFacts && Array.isArray(about.quickFacts)) {
                about.quickFacts.forEach(fact => {
                    const li = document.createElement('li');
                    li.textContent = fact;
                    quickFactsList.appendChild(li);
                });
            }


            // --- D. SHIFTS SECTION ---
            const shifts = data.shifts || {};
            if (shifts.subheading) document.getElementById('shiftsSubheading').textContent = shifts.subheading;
            if (shifts.chip) document.getElementById('shiftsChip').textContent = shifts.chip;

            const shiftsContainer = document.getElementById('shiftsContainer');
            shiftsContainer.innerHTML = ''; // Clear existing

            const createShiftCard = (title, items, note) => {
                let tableRows = '';
                if (items) {
                    items.forEach(item => {
                        tableRows += `<tr><td>${item.section}</td><td>${item.timing}</td></tr>`;
                    });
                }

                return `
                    <div class="col-6">
                        <div class="card">
                            <h3>${title}</h3>
                            <table>
                                <thead><tr><th>Section</th><th>Timings</th></tr></thead>
                                <tbody>${tableRows}</tbody>
                            </table>
                            <p style="margin-top:16px;color:var(--text-dim)">${note}</p>
                        </div>
                    </div>
                `;
            };

            // Morning Shift
            shiftsContainer.innerHTML += createShiftCard(
                shifts.morningTitle || 'Morning Shift',
                shifts.morning || [],
                shifts.morningNote || 'Friday (Jummah) half day'
            );

            // Noon Shift
            shiftsContainer.innerHTML += createShiftCard(
                shifts.noonTitle || 'Noon Shift',
                shifts.noon || [],
                shifts.noonNote || 'Assembly, dua, and value talk at the start of each shift.'
            );
            
            // --- E. FEES SECTION ---
            const fees = data.fees || {};
            if (fees.subheading) document.getElementById('feesSubheading').textContent = fees.subheading;
            if (fees.body) document.getElementById('feesBody').textContent = fees.body;
            if (fees.note) document.getElementById('feesNote').textContent = fees.note;

            const feesList = document.getElementById('feesList');
            feesList.innerHTML = '';
            if (fees.list && Array.isArray(fees.list)) {
                fees.list.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    feesList.appendChild(li);
                });
            }


            // --- F. ADMISSIONS SECTION ---
            const admissions = data.admissions || {};
            if (admissions.subheading) document.getElementById('admissionsSubheading').textContent = admissions.subheading;
            if (admissions.scheduleBody) document.getElementById('admissionScheduleBody').textContent = admissions.scheduleBody;
            if (admissions.scheduleNote) document.getElementById('admissionScheduleNote').textContent = admissions.scheduleNote;

            const stepsList = document.getElementById('admissionStepsList');
            stepsList.innerHTML = '';
            if (admissions.steps && Array.isArray(admissions.steps)) {
                admissions.steps.forEach(step => {
                    const li = document.createElement('li');
                    li.textContent = step;
                    stepsList.appendChild(li);
                });
            }

            const documentsList = document.getElementById('admissionDocumentsList');
            documentsList.innerHTML = '';
            if (admissions.documents && Array.isArray(admissions.documents)) {
                admissions.documents.forEach(doc => {
                    const li = document.createElement('li');
                    li.textContent = doc;
                    documentsList.appendChild(li);
                });
            }

            // --- G. CAREERS SECTION ---
            const careers = data.careers || {};
            if (careers.subheading) document.getElementById('careersSubheading').textContent = careers.subheading;
            if (careers.body) document.getElementById('careersBody').textContent = careers.body;

            const careersList = document.getElementById('careersList');
            careersList.innerHTML = '';
            if (careers.list && Array.isArray(careers.list)) {
                careers.list.forEach(job => {
                    const li = document.createElement('li');
                    li.textContent = job;
                    careersList.appendChild(li);
                });
            }
        });
    }

    // 2. Load Programs (Dynamic List)
    function loadPrograms() {
        const programGrid = document.getElementById('programGrid');
        programGrid.innerHTML = '<p style="grid-column: span 12; color: var(--text-dim); text-align: center;">Loading academic programs...</p>';

        db.ref('programs').on('value', (snapshot) => {
            programGrid.innerHTML = '';
            const programs = [];
            snapshot.forEach(childSnapshot => {
                programs.push({ key: childSnapshot.key, ...childSnapshot.val() });
            });

            if (programs.length === 0) {
                programGrid.innerHTML = '<p style="grid-column: span 12; color: var(--text-dim); text-align: center;">No academic programs posted yet.</p>';
                return;
            }

            programs.forEach(program => {
                const listItems = (program.list || []).map(item => `<li>${item}</li>`).join('');
                
                const cardHtml = `
                    <div class="col-4">
                        <div class="card program" data-tags="${program.tags || 'all'}">
                            <h3>${program.title || 'Untitled Program'}</h3>
                            <p>${program.description || 'No description provided.'}</p>
                            <ul style="color:var(--text-dim); padding-left: 20px;">${listItems}</ul>
                        </div>
                    </div>
                `;
                programGrid.innerHTML += cardHtml;
            });

            // Re-apply filter logic after loading programs
            const activeFilterButton = document.querySelector('.filters button.active');
            if (activeFilterButton) {
                filterPrograms(activeFilterButton.dataset.filter);
            }
        });
    }

    // 3. Load Facilities (Dynamic List)
    function loadFacilities() {
        const facilitiesGrid = document.getElementById('facilitiesGrid');
        facilitiesGrid.innerHTML = '<p style="grid-column: span 12; color: var(--text-dim); text-align: center;">Loading facilities...</p>';

        db.ref('facilities').on('value', (snapshot) => {
            facilitiesGrid.innerHTML = '';
            const facilities = [];
            snapshot.forEach(childSnapshot => {
                facilities.push({ key: childSnapshot.key, ...childSnapshot.val() });
            });

            if (facilities.length === 0) {
                facilitiesGrid.innerHTML = '<p style="grid-column: span 12; color: var(--text-dim); text-align: center;">No facilities listed yet.</p>';
                return;
            }

            facilities.forEach(facility => {
                const icon = facility.icon || '‚≠ê'; // Use a default icon if not provided
                
                const cardHtml = `
                    <div class="col-4">
                        <div class="card">
                            <h3>${icon} ${facility.title || 'Untitled Facility'}</h3>
                            <p>${facility.description || 'No description provided.'}</p>
                        </div>
                    </div>
                `;
                facilitiesGrid.innerHTML += cardHtml;
            });
        });
    }

    // 4. Load FAQ (Dynamic List)
    function loadFAQ() {
        const faqList = document.getElementById('faqList');
        faqList.innerHTML = '<p style="color:var(--text-dim); text-align: center;">Loading FAQs...</p>';

        db.ref('faq').on('value', (snapshot) => {
            faqList.innerHTML = '';
            const faqs = [];
            snapshot.forEach(childSnapshot => {
                faqs.push({ key: childSnapshot.key, ...childSnapshot.val() });
            });

            if (faqs.length === 0) {
                faqList.innerHTML = '<p style="color:var(--text-dim); text-align: center;">No FAQs posted yet.</p>';
                return;
            }

            faqs.forEach(item => {
                const detailsHtml = `
                    <details>
                        <summary>${item.question || 'Untitled Question'}</summary>
                        <p style="margin-top: 10px;">${item.answer || 'No answer provided.'}</p>
                    </details>
                `;
                faqList.innerHTML += detailsHtml;
            });
        });
    }

    // 5. Load Marquee Update (Existing Logic)
    function loadMarquee() {
      const marqueeElement = document.getElementById('marqueeContent');
      db.ref('marqueeUpdate').on('value', (snapshot) => {
        const data = snapshot.val();
        if (data && data.text) {
          marqueeElement.innerHTML = data.text;
        } else {
          marqueeElement.innerHTML = 'Welcome to Crescent School! Admissions are open.';
        }
      });
    }

    // 6. Load Notices & Events (Existing Logic)
    function loadNotices() {
      const noticesContainer = document.getElementById('noticesContainer');
      noticesContainer.innerHTML = '<p style="color:var(--text-dim); text-align: center;">Loading notices...</p>'; 

      db.ref('notices').orderByChild('timestamp').limitToLast(10).on('value', (snapshot) => {
        noticesContainer.innerHTML = '';
        const notices = [];
        snapshot.forEach(childSnapshot => {
          notices.push({ key: childSnapshot.key, ...childSnapshot.val() });
        });

        notices.reverse();

        if (notices.length === 0) {
            noticesContainer.innerHTML = '<p style="color:var(--text-dim); text-align: center;">No current notices or events posted.</p>';
            return;
        }

        notices.forEach(notice => {
          const type = notice.type || 'Notice';
          const title = notice.title || 'Untitled';
          const description = notice.description || 'No description provided.';
          
          const noticeHtml = `
            <div class="notice">
              <div class="pill">${type}</div>
              <div>
                <strong>${title}</strong> ‚Äî ${description}
              </div>
            </div>
          `;
          noticesContainer.innerHTML += noticeHtml;
        });
      });
    }
    
    // Program filters (EXISTING LOGIC) - Modified to use programGrid children
    function filterPrograms(tag) {
        const programs = document.querySelectorAll('.program');
        programs.forEach(card => {
            const parent = card.parentElement;
            if (tag === 'all') {
                parent.style.display = 'block';
                return;
            }
            const tags = (card.dataset.tags || '').split(' ');
            parent.style.display = tags.includes(tag) ? 'block' : 'none';
        });
    }

    const filterButtons = document.querySelectorAll('.filters button');
    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        filterButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filterPrograms(btn.dataset.filter);
      });
    });

    // Run ALL data loading functions on page load
    document.addEventListener('DOMContentLoaded', () => {
        loadSiteInfo();
        loadMarquee();
        loadNotices();
        loadPrograms();
        loadFacilities();
        loadFAQ();
    });
    // === END FIREBASE LOGIC ===

    // Mobile menu toggle (EXISTING LOGIC)
    const burger=document.getElementById('burger');
    const menu=document.getElementById('menu');
    burger.addEventListener('click',()=>menu.classList.toggle('open'));

    // === Hero Media Slideshow Logic (EXISTING LOGIC) ===
    const video = document.getElementById('heroVideo');
    const slideshowContainer = document.getElementById('imageSlideshow');
    const slides = slideshowContainer.querySelectorAll('.slide');
    let currentSlide = 0;
    const intervalTime = 4000; 

    function nextSlide() {
        slides[currentSlide].classList.remove('active');
        currentSlide = (currentSlide + 1) % slides.length;
        slides[currentSlide].classList.add('active');
    }

    function startSlideshow() {
        video.style.opacity = '0';
        video.style.zIndex = '1';
        slideshowContainer.style.opacity = 1;
        slideshowContainer.style.zIndex = 3; 
        slides[currentSlide].classList.add('active');
        setInterval(nextSlide, intervalTime);
    }
    
    slides.forEach((slide, index) => {
        if (index > 0) {
            slide.classList.remove('active');
        }
    });

    video.playbackRate = 1.5; 
    video.addEventListener('ended', startSlideshow);

    video.play().catch(error => {
        console.warn("Video autoplay prevented or failed, starting slideshow immediately as fallback.", error);
        startSlideshow(); 
    });

  </script>


</body></html>